/**
 * Copyright (c) 2015 Xinhuanet Inc. All rights reserved.
 * xinhuanetAD
 * @time 2016-05-23-14.11.32
 */
function doneTips(a,b,c){var d=$done.html();if(b){if("html"===b)c?"$done"===c?$done.html(a):"$done2"===c&&$done2.html(a):$done2.html(a);else if("prepend"===b){var e=$done2.html();e.indexOf(a)<0&&$done2.prepend(a)}}else d.indexOf(a)<0&&$done.append(a)}function tips(){doneTips(str2,"html","$done"),$(".bR").removeClass("bR")}var $body=$("body"),$addImgPos=$("#addImgPos"),$emptyToggle=$("#emptyToggle"),$emptyBox=$("#emptyBox"),$emptySrc=$("#emptySrc"),$emptyAlt=$("#emptyAlt"),$submit=$("#submit"),$output=$("#output"),$copy=$("#copy"),$tipBox=$("#tipBox"),outputHtml='<p>“把大象放进冰箱总共3步”，所以xinhuanetAD tools也只需3步：</p><hr><p>1、正确填写上面表单。<br>2、点击 <a href="javascript:void(0);" onClick="$(\'#submit\').click();">&quot;提 交&quot;</a> 生成广告代码。<br>3、点击 <a href="javascript:void(0);" onClick="$(\'#copy\').click();">&quot;复 制&quot;</a> 粘贴代码到广告系统。</p>',$done,$done2,str2="必要选项不能为空！",textarea="",timeout,global_code=null,clip;$(function(){var a;$tipBox.html('<div class="done" id="done"></div><div class="done done2" id="done2"></div>'),$done=$("#done"),$done2=$("#done2"),$output.html(outputHtml),$("#addImg").on("click",function(){a=$("#src").find("input").eq(0).val(),a="undefined"===a?'placeholder="友情提示==> 必须添加图片地址!!!"':'value="'+a+'"',$addImgPos.append('<div class="tr"><div class="td0"></div><div class="td1"><input class="input" '+a+"> <button class=\"delImg\" onClick=\"$(this).parent().parent().remove();$('#addImgPos').attr('data-max', $addImgPos.attr('data-max')-0-1);\">-</button></div></div>"),$addImgPos.attr("data-max",$addImgPos.attr("data-max")-0+1)});var b,c,d,e,f;$submit.on("click",function(){var a=[],g=$("#src").find("input");g.each(function(){var b="'"+$(this).val().trim()+"'";a.push(b)}),f=a,b=$("#width").val().trim(),c=$("#height").val().trim(),d=$("#url").val().trim(),e="";var h='<script>document.writeln("<div class=\\"xinhuanetADBox\\" data-ad=\\"{url:\''+d+"',src:["+f+"],width:'"+b+"',height:'"+c+"',alt:'"+e+"',empty:null,toggle:'off'}\\\"></div>\");</script>";""===d?(tips(),$("#url").addClass("bR")):""===b?(tips(),$("#width").addClass("bR").siblings(document).removeClass("bR")):""===c?(tips(),$("#height").addClass("bR")):""===g.val()?g.each(function(){var a=$(this);a.addClass("bR"),doneTips(str2,"html","$done")}):($(".bR").removeClass("bR"),g.each(function(){var a=$(this),b=a.val().trim();if(b.lastIndexOf(".jpg")<0&&b.lastIndexOf(".png")<0&&b.lastIndexOf(".gif")<0){var c="您的图片格式可能存在问题！！！<br>请尝试使用<70k的jpg（或者png、gif）格式的图片";doneTips(c,"html","$done"),$done2.html(""),a.addClass("bR")}else""!==b&&a.removeClass("bR")})),$(".bR").length?($output.html(""),global_code=null):(textarea='<textarea id="content" class="copyTextarea" rows="5">'+h+"</textarea>",$output.html(textarea),doneTips("^0^ 制作完成！","html","$done"),global_code=h,clip=new ZeroClipboard($("#copy")),$done2.html(""))}),$("#copy").on("click",function(){null===global_code?doneTips("-__-||| 无法复制，因为您似乎没有制作代码！","html","$done"):(clip=new ZeroClipboard($("#copy")),doneTips("~__~ 已复制！","html","$done"))}),$body.append('<div class="footer">本工具必须使用Chrome浏览器，技术支持：&copy; '+(new Date).getFullYear()+" 新华网 技术部<div>")});