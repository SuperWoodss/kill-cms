/**
 * Copyright (c) 2000 - 2016 XINHUANET.com All Rights Reserved.
 * kill-cms v0.9.0
 * @time 2016-08-23-10.07.27
 */
"use strict";$(function(){var a=void 0,b=function(a,b){a.html(b)},c=$("#format"),d=c.find("input"),e="";d.eq(0).on("click",function(a){e="\n"}),d.eq(1).on("click",function(a){e=""}),"\n"===e?(d.eq(0).attr("checked",!0),d.eq(1).attr("checked",!1)):(d.eq(0).attr("checked",!1),d.eq(1).attr("checked",!0));var f=function(a){var b=a.attr("class");return b&&b.length>0?' class="'+b+'"':""},g=function(b,c){var d=a[c]?a[c]:["未命名","888888","默认",0],g=b.find("a"),h=b.find(".abs"),i=b.find(".subTitle"),j=b.find("img"),k=j.attr("width"),l=j.attr("height"),m=d[1],n=d[2],o=d[3],p=o<200||void 0===o?0:o,q={lt:"&lt;",gt:"&gt;",enpquot:"#enpquot#",Picture:{needcode:['<img data-src="<Picture needcode=0>PictureUrlPh</Picture>">','<img data-original="<Picture needcode=0>PictureUrlPh</Picture>">',"<Picture needcode=1 width="+(k?k:100)+" height="+(l?l:100)+">PictureUrlPh</Picture>"]},Title:'<Title length="0">TitlePh</Title>',ArticleUrlPh:"ArticleUrlPh",Abstract:"<Abstract>AbstractPh</Abstract>",Subtitle:"<Subtitle>SubtitlePh</Subtitle>"};g.each(function(a,b){var c=$(b);0===c.find("img").size()&&0!==c.text().indexOf("详细")&&c.text(q.Title)}),h.each(function(a,b){var c=$(b);if(c.find("a").size()>0){var d=c.find("a").text();c.text(q.Abstract+'URL_BEGIN<a href="'+q.ArticleUrlPh+'">URL_END'+d+"</a>")}else c.text(q.Abstract)}),i.each(function(a,b){var c=$(b);c.find("a").size()>0?c.text('URL_BEGIN<a href="'+q.ArticleUrlPh+'">URL_END'+q.Subtitle+"</a>"):c.text(q.Subtitle)}),g.attr("href",q.ArticleUrlPh).before("URL_BEGIN").prepend("URL_END"),j.each(function(a,b){var c=$(b);c.replaceWith(function(){var a=q.Picture.needcode[2];return c.attr("data-src")?a=q.Picture.needcode[0]:c.attr("data-original")&&(a=q.Picture.needcode[1]),a})});var r=b.html(),s="html",t=b;if(b.is("ul")){var u=t.children("li"),v=u.size();if(v>1){var w=f(t),x=f(u);o>1?v=o:o=v,r="<ul"+w+">\n                        <Repeat Begin=0 End="+v+">\n                            <Article>\n                                <li"+x+">"+u.eq(0).html()+"</li>\n                            </Article>\n                        </Repeat>\n                    </ul>",s="replaceWith"}}else if(b.children("div").size()>1){var y=t.children("div"),z=y.size();if(z>1){var A=(f(t),f(y));o>1?z=o:o=z,r="<Repeat Begin=0 End="+z+">\n                        <Article>\n                            <div"+A+">"+y.eq(0).html()+"</div>\n                        </Article>\n                    </Repeat>"}}else r=o>1?"<Repeat Begin=0 End="+o+">\n                        <Article>\n                            "+r+"\n                        </Article>\n                    </Repeat>":"<Article>"+r+"</Article>";r=$.HTMLFormat(r,{indent_size:"\n"===e?4:0,wrap:"\n"===e,indent_character:"\n"===e?" ":""}),r=r.replace(/picture/g,"Picture").replace(/URL_BEGIN/g,"<Url>").replace(/URL_END/g,"</Url>").replace(/</g,q.lt).replace(/>/g,q.gt).replace(/"/g,q.enpquot);var B=""===n||null===n||"null"===n||"默认"===n?"默认":n.replace("61","图片").replace("62","头条").replace("63","普通"),C="\n        <!-- mod: "+c+", name: "+d[0]+", nodeid:"+m+", attr:"+B+", rpt:"+o+' BEGIN -->\n        <!--webbot bot="AdvTitleList" nodeid="'+(""===m?"888888":m)+'" type="0" spanmode="0" dayspan="'+p+'" attr="'+(""===n||"null"===n||"默认"===n?"":n)+'" comstring="'+e+r+e+'" TAG="BODY" PREVIEW="[高级标题列表]" artattr="0" isshowcode="0" titlekeyword="" keyword="" tagstring="00" starttime="" endtime="" id="" startspan --><!--webbot bot="AdvTitleList" endspan i-checksum="0" -->\n        <!-- mod: '+c+" END -->\n        ";b.removeAttr("kill"),"html"===s?b.html(C):"replaceWith"===s&&b.replaceWith(C)},h=$("#submit");h.on("click",function(){var c=$("#input"),d=c.val(),e=$("#tempDOM");b(e,$.trim(d));var f=e.find("[kill]");a=[];var h=e.find("#killConfig"),i=h.find("li");i.each(function(b,c){var d=$(c).text();d=d.split(","),d[0]=$.trim(d[0]),d[1]=$.trim(d[1]),d[2]=$.trim(d[2]),d[3]=$.trim(d[3])-0,d[2].indexOf("默认")>=0||""===d[1]?(d[2]="null",d[2]=d[2].replace(new RegExp("默认","g"),"")):(d[2]=d[2].replace("图片","+61").replace("头条","+62").replace("普通","+63"),d[2]=d[2].replace(new RegExp("图片","g"),"").replace(new RegExp("头条","g"),"").replace(new RegExp("普通","g"),"")),a.push(d)}),h.remove(),f.each(function(a,b){g($(b),a)});var j=$("#output");j.text(e.html())}),$.when($.ajax("package.json")).then(function(a){var b=a.version;$("title").append(" v"+b),$("#version").append(" v "+b)})});