/**
 * Copyright (c) 2000 - 2016 XINHUANET.com All Rights Reserved.
 * kill-cms v0.9.0
 * @time 2016-08-22-15.24.32
 */
!function(a){a.HTMLFormat=function(b,c){function d(a,b,c,d){function f(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1}},this.get_content=function(){for(var a="",b=[],c=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];if(a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace))b.length&&(c=!0),this.line_char_count--;else{if(c){if(this.line_char_count>=this.max_char){e&&b.push("\n");for(var d=0;d<this.indent_level;d++)b.push(this.indent_string);this.line_char_count=0}else b.push(" "),this.line_char_count++;c=!1}b.push(a)}}return b.length?b.join(""):""},this.get_script=function(){var a="",b=[],c=new RegExp("</script>","igm");c.lastIndex=this.pos;for(var d=c.exec(this.input),e=d?d.index:this.input.length;this.pos<e;){if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos),this.pos++,b.push(a)}return b.length?b.join(""):""},this.record_tag=function(a){this.tags[a+"count"]?(this.tags[a+"count"]++,this.tags[a+this.tags[a+"count"]]=this.indent_level):(this.tags[a+"count"]=1,this.tags[a+this.tags[a+"count"]]=this.indent_level),this.tags[a+this.tags[a+"count"]+"parent"]=this.tags.parent,this.tags.parent=a+this.tags[a+"count"]},this.retrieve_tag=function(a){if(this.tags[a+"count"]){for(var b=this.tags.parent;b&&a+this.tags[a+"count"]!==b;)b=this.tags[b+"parent"];b&&(this.indent_level=this.tags[a+this.tags[a+"count"]],this.tags.parent=this.tags[b+"parent"]),delete this.tags[a+this.tags[a+"count"]+"parent"],delete this.tags[a+this.tags[a+"count"]],1==this.tags[a+"count"]?delete this.tags[a+"count"]:this.tags[a+"count"]--}},this.get_tag=function(){var a="",b=[],c=!1;do{if(this.pos>=this.input.length)return b.length?b.join(""):["","TK_EOF"];a=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(a,this.Utils.whitespace)?(c=!0,this.line_char_count--):("'"!==a&&'"'!==a||b[1]&&"!"===b[1]||(a+=this.get_unformatted(a),c=!0),"="===a&&(c=!1),b.length&&"="!==b[b.length-1]&&">"!==a&&c&&(this.line_char_count>=this.max_char?(this.print_newline(!1,b),this.line_char_count=0):(b.push(" "),this.line_char_count++),c=!1),b.push(a))}while(">"!==a);var d,e=b.join("");d=e.indexOf(" ")!=-1?e.indexOf(" "):e.indexOf(">");var f=e.substring(1,d).toLowerCase();if("/"===e.charAt(e.length-2)||this.Utils.in_array(f,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===f)this.record_tag(f),this.tag_type="SCRIPT";else if("style"===f)this.record_tag(f),this.tag_type="STYLE";else if("!"===f.charAt(0))if(f.indexOf("[if")!=-1){if(e.indexOf("!IE")!=-1){var g=this.get_unformatted("-->",e);b.push(g)}this.tag_type="START"}else if(f.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(f.indexOf("[cdata[")!=-1){var g=this.get_unformatted("]]>",e);b.push(g),this.tag_type="SINGLE"}else{var g=this.get_unformatted("-->",e);b.push(g),this.tag_type="SINGLE"}else"/"===f.charAt(0)?(this.retrieve_tag(f.substring(1)),this.tag_type="END"):(this.record_tag(f),this.tag_type="START"),this.Utils.in_array(f,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return b.join("")},this.get_unformatted=function(a,b){if(b&&b.indexOf(a)!=-1)return"";var c="",d="",f=!0;do{if(c=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(c,this.Utils.whitespace)){if(!f){this.line_char_count--;continue}if("\n"===c||"\r"===c){e&&(d+="\n");for(var g=0;g<this.indent_level;g++)d+=this.indent_string;f=!1,this.line_char_count=0;continue}}d+=c,this.line_char_count++,f=!0}while(d.indexOf(a)==-1);return d},this.get_token=function(){var a;if("TK_TAG_SCRIPT"===this.last_token){var b=this.get_script();return"string"!=typeof b?b:[b,"TK_CONTENT"]}if("CONTENT"===this.current_mode)return a=this.get_content(),"string"!=typeof a?a:[a,"TK_CONTENT"];if("TAG"===this.current_mode){if(a=this.get_tag(),"string"!=typeof a)return a;var c="TK_TAG_"+this.tag_type;return[a,c]}},this.printer=function(a,b,c,d){this.input=a||"",this.output=[],this.indent_character=b||"",this.indent_string="",this.indent_size=c||0,this.indent_level=0,this.max_char=d||70,this.line_char_count=0;for(var f=0;f<this.indent_size;f++)this.indent_string+=this.indent_character;this.print_newline=function(a,b){if(this.line_char_count=0,b&&b.length){if(!a)for(;this.Utils.in_array(b[b.length-1],this.Utils.whitespace);)b.pop();e&&b.push("\n");for(var c=0;c<this.indent_level;c++)b.push(this.indent_string)}},this.print_token=function(a){this.output.push(a)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var f,g;for(g=new f,g.printer(a,c,b);;){var h=g.get_token();if(g.token_text=h[0],g.token_type=h[1],"TK_EOF"===g.token_type)break;switch(g.token_type){case"TK_TAG_START":case"TK_TAG_SCRIPT":case"TK_TAG_STYLE":g.print_newline(!1,g.output),g.print_token(g.token_text),g.indent(),g.current_mode="CONTENT";break;case"TK_TAG_END":g.print_newline(!0,g.output),g.print_token(g.token_text),g.current_mode="CONTENT";break;case"TK_TAG_SINGLE":g.print_newline(!1,g.output),g.print_token(g.token_text),g.current_mode="CONTENT";break;case"TK_CONTENT":""!==g.token_text&&(g.print_newline(!1,g.output),g.print_token(g.token_text)),g.current_mode="TAG"}g.last_token=g.token_type,g.last_text=g.token_text}return g.output.join("")}var e=!1,f={indent_size:0,indent_character:"",max_char:268435456,wrap:!1};c=a.extend(f,c),e=c.wrap;var g=["__dataHolder_",[Math.random(),Math.random(),Math.random(),Math.random()].join("_").replace(/[^0-9]/g,"_"),"_"].join("_"),h={},i=0;return b=b.replace(/(\")(data:[^\"]*)(\")/g,function(a,b,c,d){var e=g+i++;return h[e]=c,b+e+d}),b=d(b,c.indent_size,c.indent_character,c.max_char),b=b.replace(new RegExp(g+"[0-9]+","g"),function(a){return h[a]})}}($);